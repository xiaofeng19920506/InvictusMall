@use '../../styles/variables.scss' as *;
@use '../../styles/mixins.scss' as *;

.header {
  background-color: color('gray-900');
  color: color('white');
  position: sticky;
  top: 0;
  z-index: 50;
  box-shadow: none; // Amazon doesn't use shadow on header
  border-bottom: 1px solid color('gray-800');
}

.headerContent {
  max-width: 100%; // Full width like Amazon
  margin-left: auto;
  margin-right: auto;
  padding-left: 0.75rem; // Reduced padding
  padding-right: 0.75rem;
  
  @include respond-to('sm') {
    padding-left: 1rem;
    padding-right: 1rem;
  }
  
  @include respond-to('lg') {
    padding-left: 1.5rem;
    padding-right: 1.5rem;
  }
}

.headerInner {
  @include flex;
  @include items-center;
  @include justify-between;
  height: 4rem; // h-16 = 4rem = 64px
  gap: 1rem; // Ensure spacing between elements
}

.logo {
  @include flex;
  @include items-center;
  
  h1 {
    font-size: font-size('2xl');
    font-weight: font-weight('bold');
    color: color('orange-500');
    cursor: pointer;
    transition: color 0.2s;
    
    &:hover {
      color: color('orange-600');
    }
    
    &:focus {
      outline: none;
      box-shadow: 0 0 0 2px color('orange-500');
    }
  }
}

.searchForm {
  flex: 1;
  max-width: 35rem; // Further reduced max-width
  margin: 0 spacing(2); // Reduced margin
  
  @include respond-to('sm') {
    margin: 0 spacing(3);
    max-width: 38rem;
  }
  
  @include respond-to('lg') {
    margin: 0 spacing(4);
    max-width: 40rem;
  }
}

.searchControls {
  @include flex;
  height: 2.5rem; // Fixed height like Amazon (h-10)
  border-radius: border-radius('md'); // Smaller radius
  overflow: visible; // Allow dropdown to show outside
  background-color: color('white');
  border: 2px solid transparent;
  transition: border-color 0.2s;
  position: relative;
  isolation: isolate; // Create new stacking context
  
  &:focus-within {
    border-color: color('orange-500');
    z-index: 10; // Bring to front when focused
  }
}

.searchTypeDropdown {
  position: relative;
  z-index: 20; // Higher z-index for dropdown
}

.searchTypeButton {
  padding: 0 spacing(2.5);
  color: color('gray-700');
  background-color: color('gray-100'); // Light gray background like Amazon
  border: none;
  border-right: 1px solid color('gray-300');
  border-radius: 0;
  border-top-left-radius: border-radius('md'); // Rounded left side
  border-bottom-left-radius: border-radius('md');
  font-size: font-size('sm');
  cursor: pointer;
  min-width: 6rem; // Reduced width
  max-width: 7rem; // Limit maximum width
  transition: background-color 0.15s;
  display: flex;
  align-items: center;
  justify-content: space-between;
  height: 100%;
  
  &:focus {
    outline: none;
    background-color: color('gray-200');
  }
  
  &:hover {
    background-color: color('gray-200');
  }
  
  span {
    flex: 1;
    text-align: left;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
}

.dropdownIcon {
  width: 1rem;
  height: 1rem;
  color: color('gray-600');
  transition: transform 0.2s;
  margin-left: spacing(2);
  
  &.open {
    transform: rotate(180deg);
  }
}

.searchTypeDropdownMenu {
  position: absolute;
  top: 100%;
  left: 0;
  background-color: color('white');
  border: 1px solid color('gray-300');
  border-radius: border-radius('md');
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
  margin-top: 0.25rem;
  overflow: hidden;
  z-index: 21;
  width: 100%; // Match button width
  min-width: auto; // Remove min-width constraint
}

.searchTypeOption {
  width: 100%;
  padding: spacing(2) spacing(3);
  text-align: left;
  background-color: color('white');
  color: color('gray-900');
  border: none;
  cursor: pointer;
  font-size: font-size('sm');
  transition: background-color 0.15s;
  
  &:hover {
    background-color: color('gray-100');
  }
  
  &.active {
    background-color: color('orange-50');
    color: color('orange-600');
    font-weight: font-weight('medium');
  }
  
  &:first-child {
    border-top-left-radius: border-radius('md');
    border-top-right-radius: border-radius('md');
  }
  
  &:last-child {
    border-bottom-left-radius: border-radius('md');
    border-bottom-right-radius: border-radius('md');
  }
}

.searchInputWrapper {
  position: relative;
  flex: 1;
  display: flex;
  align-items: center;
}

.searchInput {
  width: 100%;
  padding: 0 spacing(2); // Further reduced padding
  color: color('gray-900');
  background-color: color('white');
  border: none;
  border-radius: 0;
  font-size: font-size('xs'); // Even smaller font size
  
  &:focus {
    outline: none;
  }
  
  &::placeholder {
    color: color('gray-400');
    font-size: font-size('xs');
  }
}

.searchButton {
  background-color: color('orange-500'); // Orange button like Amazon
  color: color('white');
  border: none;
  cursor: pointer;
  padding: 0 spacing(5); // Increased padding for larger button
  height: 100%;
  min-width: 3rem; // Minimum width for button
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background-color 0.2s;
  border-top-right-radius: border-radius('md'); // Rounded right side only
  border-bottom-right-radius: border-radius('md');
  font-size: font-size('xl'); // Larger icon size
  
  &:hover {
    background-color: color('orange-600');
  }
  
  &:active {
    background-color: color('orange-700');
  }
}

.headerActions {
  display: flex;
  align-items: center;
  gap: 1rem !important; // Force gap between button groups (Sign In/Sign Up group and Cart)
  
  @include respond-to('sm') {
    gap: 1.25rem !important;
  }
  
  @include respond-to('lg') {
    gap: 1.5rem !important;
  }
}

.userActions {
  display: flex;
  align-items: center;
  gap: 0.75rem !important; // Force gap between Sign In and Sign Up buttons
  
  @include respond-to('sm') {
    gap: 1rem !important;
  }
  
  @include respond-to('lg') {
    gap: 1.25rem !important;
  }
}

// Common button styles for consistent height
.headerButton {
  display: flex;
  align-items: center;
  justify-content: center; // Center content horizontally
  gap: 0.75rem; // Proper gap between icon and text (12px)
  padding: spacing(2.5) spacing(6); // Increased horizontal padding for longer buttons
  font-size: font-size('sm');
  font-weight: font-weight('medium');
  color: color('white');
  background-color: color('gray-800');
  border-radius: border-radius('md'); // Smaller radius
  border: none;
  cursor: pointer;
  transition: background-color 0.2s;
  text-decoration: none;
  height: 2.75rem; // Increased height (h-11 = 2.75rem = 44px)
  min-width: 6rem; // Minimum width to make buttons longer
  white-space: nowrap;
  
  &:hover {
    background-color: color('gray-700');
  }
}

.adminButton {
  @extend .headerButton;
  background-color: color('orange-500');
  
  &:hover {
    background-color: color('orange-600');
  }
}


.signInButton {
  @extend .headerButton;
}

.signUpButton {
  @extend .headerButton;
  background-color: color('orange-500');
  
  &:hover {
    background-color: color('orange-600');
  }
}

.cartButton {
  @extend .headerButton;
  position: relative;
  height: 2.75rem; // Match increased height
}

.userDropdownButton {
  @extend .headerButton;
  padding: spacing(2.5) spacing(5); // Increased padding for longer button
  height: 2.75rem; // Match increased height
  min-width: 8rem; // Longer minimum width for user button
}

.userDropdown {
  position: relative;
}

.dropdownMenu {
  position: absolute;
  right: 0;
  margin-top: spacing(2);
  width: 14rem !important; // Increased width for better spacing
  background-color: color('white');
  border-radius: border-radius('lg');
  box-shadow: shadow('lg');
  padding: 0.375rem !important; // Reduced padding: 0.375rem (6px) for more compact menu
  z-index: 50;
  border: 1px solid color('gray-200');
  display: flex !important;
  flex-direction: column !important;
  gap: 0.25rem !important; // Reduced gap between items: 0.25rem (4px) for tighter spacing
}

.dropdownItem {
  display: block !important;
  padding: 0.625rem 1rem !important; // Reduced by 1/3: 0.625rem (10px) vertical, 1rem (16px) horizontal
  font-size: font-size('sm');
  color: color('gray-700');
  cursor: pointer;
  transition: background-color 0.2s;
  text-decoration: none;
  border: none;
  background: none;
  width: 100%;
  text-align: left;
  border-radius: border-radius('md'); // Add border radius for better appearance
  
  &:hover {
    background-color: color('gray-100');
  }
  
  > div {
    @include flex;
    @include items-center;
    gap: 0.75rem !important; // Reduced gap: 0.75rem (12px) for icon-text spacing
    width: 100%;
  }
  
  span {
    display: inline-block;
    
    &:first-child {
      font-size: 1rem; // Standard icon size
      flex-shrink: 0; // Prevent icon from shrinking
    }
  }
}

.userAvatar {
  width: 2rem;
  height: 2rem;
  border-radius: border-radius('full');
  border: 2px solid color('white');
}

.userInitials {
  width: 2rem;
  height: 2rem;
  border-radius: border-radius('full');
  background-color: color('orange-500');
  @include flex;
  @include items-center;
  @include justify-center;
  color: color('white');
  font-size: font-size('xs');
  font-weight: font-weight('bold');
}

.welcomeText {
  font-size: font-size('sm');
  color: color('gray-300');
}

.badge {
  padding: spacing(1) spacing(2);
  font-size: font-size('xs');
  color: color('white');
  border-radius: border-radius('full');
  
  &.admin {
    background-color: color('orange-500');
  }
  
  &.storeOwner {
    background-color: color('blue-500');
  }
}

.dropdownArrow {
  color: color('gray-400');
}

.cartBadge {
  position: absolute;
  top: -0.25rem;
  right: -0.25rem;
  background-color: color('orange-500');
  color: color('white');
  font-size: font-size('xs');
  border-radius: border-radius('full');
  width: 1.25rem;
  height: 1.25rem;
  @include flex;
  @include items-center;
  @include justify-center;
}

.categoryNav {
  background-color: color('gray-800');
  border-top: 1px solid color('gray-700');
  min-height: 2.5rem; // Reduced height like Amazon
  display: flex;
  align-items: center; // Vertically center the content
}

.categoryNavContent {
  max-width: 100%; // Full width like Amazon
  margin-left: auto;
  margin-right: auto;
  padding-left: 0.75rem; // Reduced padding
  padding-right: 0.75rem;
  width: 100%;
  
  @include respond-to('sm') {
    padding-left: 1rem;
    padding-right: 1rem;
  }
  
  @include respond-to('lg') {
    padding-left: 1.5rem;
    padding-right: 1.5rem;
  }
}

.categoryList {
  @include flex;
  @include items-center; // Vertically center buttons
  gap: 1.5rem; // Increased horizontal gap between buttons - 24px
  overflow-x: auto;
  padding: 0; // Remove vertical padding since we're centering with align-items
  
  // Hide scrollbar but keep functionality
  scrollbar-width: thin;
  scrollbar-color: color('gray-600') color('gray-800');
  
  &::-webkit-scrollbar {
    height: 4px;
  }
  
  &::-webkit-scrollbar-track {
    background: color('gray-800');
  }
  
  &::-webkit-scrollbar-thumb {
    background: color('gray-600');
    border-radius: 2px;
    
    &:hover {
      background: color('gray-500');
    }
  }
}

.categoryButton {
  padding: 0.75rem 1rem; // Increased padding for better hover effect (12px vertical, 16px horizontal)
  font-size: font-size('sm'); // Smaller font like Amazon
  font-weight: font-weight('normal'); // Normal weight
  border-radius: border-radius('sm'); // Smaller radius
  white-space: nowrap;
  transition: all 0.15s;
  cursor: pointer;
  border: none;
  background: none;
  flex-shrink: 0; // Prevent buttons from shrinking
  text-decoration: none; // Remove underline from Link
  display: inline-block; // Make Link behave like button
  
  &.active {
    background-color: transparent; // No background for active
    color: color('white');
    font-weight: font-weight('medium'); // Slightly bolder when active
  }
  
  &.inactive {
    color: color('gray-300');
    
    &:hover {
      color: color('white');
      background-color: rgba(255, 255, 255, 0.1); // Subtle hover effect
    }
  }
}

.loadingCategories {
  padding: spacing(2) spacing(4);
  font-size: font-size('sm');
  color: color('gray-400');
}

